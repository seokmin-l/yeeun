<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ì˜ˆì€ì•„ ì‚¬ë‘í•´í•´ ğŸ’–</title>
<style>
  :root{
    --bg1: #fff0f6;
    --bg2: #fff7fb;
  }
  html,body{
    height:100%;
    margin:0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans KR", "Malgun Gothic", sans-serif;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    background: linear-gradient(180deg,var(--bg1), var(--bg2));
    overflow:hidden;
  }

  /* ì¤‘ì•™ ë¬¸êµ¬ */
  .center {
    position: absolute;
    left:50%;
    top:50%;
    transform: translate(-50%,-50%);
    text-align:center;
    z-index: 1000;
    user-select: none;
  }
  .center h1{
    margin:0 0 .6rem 0;
    font-size: clamp(20px, 4.5vw, 44px);
    letter-spacing: -0.02em;
    color:#ff2d95;
    text-shadow: 0 6px 20px rgba(255,45,149,0.12);
  }
  .center p{
    margin:0;
    color:#5a5a5a;
    font-size: clamp(12px, 2.4vw, 18px);
  }
  .edit{
    display:inline-block;
    margin-top:12px;
    background:#fff;
    border-radius:999px;
    padding:6px 12px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.06);
    cursor:pointer;
    font-size:13px;
  }

  /* í•˜íŠ¸ ê¸°ë³¸ ìŠ¤íƒ€ì¼ (positioned absolutely by JS) */
  .heart {
    position: absolute;
    will-change: transform, opacity;
    pointer-events: none;
    z-index: 500;
    transform-origin: center;
    font-size: 20px;
    opacity: 0.95;
    mix-blend-mode: screen;
    text-shadow: 0 3px 8px rgba(0,0,0,0.08);
  }

  /* ë‚™í•˜ ì• ë‹ˆë©”ì´ì…˜ */
  @keyframes fall {
    0% {
      transform: translateY(-30vh) rotate(0deg) scale(0.6);
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    100% {
      transform: translateY(120vh) rotate(360deg) scale(1);
      opacity: 0.98;
    }
  }

  /* ì¢Œìš° í”ë“¤ë¦¼ (ë¬´ì‘ìœ„ ì ìš©) */
  @keyframes sway {
    0% { transform: translateX(0) }
    50% { transform: translateX(20px) }
    100% { transform: translateX(0) }
  }

  /* ì‘ì€ ë„ì›€ë§ ìˆ¨ê¹€ (ìŠ¤í¬ë¦° ë¦¬ë”/ì ‘ê·¼ì„± ëª©ì ) */
  .sr-only { position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }
</style>
</head>
<body>
  <div class="center" role="banner">
    <h1 id="message" contenteditable="false">ì˜ˆì€ì•„ ì‚¬ë‘í•´ â¤ï¸</h1>
    <p>ì›í•˜ì‹œë©´ ë¬¸êµ¬ë¥¼ í´ë¦­í•´ì„œ ë°”ê¿”ë³´ì„¸ìš”. í•˜íŠ¸ë¥¼ ë”/ì¤„ì´ë ¤ë©´ í™”ë©´ì„ í´ë¦­í•˜ì„¸ìš”.</p>
  </div>

<script>
(function(){
  const body = document.body;
  let spawnInterval = 300; // ê¸°ë³¸ ìƒì„± ì£¼ê¸° (ms)
  let running = true;

  // í´ë¦­í•  ë•Œë§ˆë‹¤ í•˜íŠ¸ ì„¸ ê°œ ìƒì„± (ê¹œì§ íš¨ê³¼)
  body.addEventListener('click', () => {
    for(let i=0;i<3;i++) createHeart(true);
  });

  // ë¬¸êµ¬ í¸ì§‘ í† ê¸€
  const msg = document.getElementById('message');
  const toggle = document.getElementById('toggleEdit');
  toggle.addEventListener('click', () => {
    const editable = msg.getAttribute('contenteditable') === 'true';
    msg.setAttribute('contenteditable', !editable);
    msg.focus();
    toggle.textContent = editable ? 'í¸ì§‘' : 'ì™„ë£Œ';
  });

  // ì—”í„° ëˆ„ë¥´ë©´ í¸ì§‘ ëª¨ë“œ ëë‚´ê¸° (ë¬¸êµ¬ ì €ì¥)
  msg.addEventListener('keydown', (e) => {
    if(e.key === 'Enter'){ e.preventDefault(); msg.blur(); msg.setAttribute('contenteditable', 'false'); toggle.textContent='í¸ì§‘'; }
  });

  // í•˜íŠ¸ ìƒì„± í•¨ìˆ˜
  function createHeart(uplift=false){
    const el = document.createElement('div');
    el.className = 'heart';
    // ì´ëª¨ì§€ í•˜íŠ¸ ë˜ëŠ” í…ìŠ¤íŠ¸ í•˜íŠ¸ ì„ íƒ
    const hearts = ['â¤','ğŸ’–','ğŸ’˜','ğŸ’“','ğŸ’','ğŸ’•'];
    el.textContent = hearts[Math.floor(Math.random()*hearts.length)];

    // ëœë¤ ìŠ¤íƒ€ì¼
    const size = Math.round((Math.random() * 28) + 14); // 14 ~ 42px
    el.style.fontSize = size + 'px';

    // ìœ„ì¹˜: í™”ë©´ ê°€ë¡œ ì „ì²´ + ì•½ê°„ì˜ ì—¬ìœ 
    const left = Math.random() * 100;
    el.style.left = left + 'vw';

    // ìƒ‰ìƒ í†¤ (pink ~ red)
    const r = 220 + Math.round(Math.random()*35);
    const g = 30 + Math.round(Math.random()*80);
    const b = 80 + Math.round(Math.random()*100);
    el.style.color = `rgb(${r},${g},${b})`;

    // ì• ë‹ˆë©”ì´ì…˜ ì†ë„/íƒ€ì´ë° ëœë¤
    const duration = (4 + Math.random()*4).toFixed(2); // 4~8ì´ˆ
    const delay = (Math.random()*0.5).toFixed(2);
    el.style.animation = `fall ${duration}s linear ${delay}s forwards`;
    // ì‚´ì§ í”ë“¤ë¦¬ê²Œ í• ì§€ ëœë¤
    if(Math.random() > 0.6){
      const swayDuration = (2 + Math.random()*2).toFixed(2);
      el.style.animation += `, sway ${swayDuration}s ease-in-out ${delay}s infinite`;
    }

    // ê°€ë²¼ìš´ íšŒì „ ëœë¤
    const rotate = (Math.random()*40 - 20).toFixed(1);
    el.style.transform = `rotate(${rotate}deg)`;

    // ìˆ˜í‰ ì´ë™ ë³´ì • (transformê³¼ ì¶©ëŒí•˜ì§€ ì•Šë„ë¡ animation ì‚¬ìš©)
    // remove after animation finishes
    el.addEventListener('animationend', () => {
      el.remove();
    });

    body.appendChild(el);

    // uplift ì˜µì…˜: ì»¤ë‹¤ë€ í•˜íŠ¸ê°€ ìœ„ë¡œ ì†ŸëŠ” íš¨ê³¼
    if(uplift){
      el.style.transition = 'transform .6s ease-out, opacity .6s ease-out';
      el.style.transform = 'translateY(-40px) scale(1.3)';
      setTimeout(()=> {
        // ì´í›„ ìì—°ìŠ¤ëŸ½ê²Œ ë–¨ì–´ì§€ëŠ” ì• ë‹ˆë©”ì´ì…˜ì„ ë‚¨ê¹€
        el.style.transform = '';
      }, 80);
    }
  }

  // ì£¼ê¸°ì ìœ¼ë¡œ í•˜íŠ¸ ìƒì„±
  let intervalId = setInterval(() => {
    if(!running) return;
    // í•œ ë²ˆì— 1~2ê°œ ìƒì„±
    createHeart();
    if(Math.random() > 0.7) createHeart();
    // ê´€ë¦¬: ë„ˆë¬´ ë§ì€ ë…¸ë“œê°€ ìŒ“ì´ì§€ ì•Šë„ë¡ ì œê±° ë£¨í‹´(ì•ˆì „)
    const hearts = document.querySelectorAll('.heart');
    if(hearts.length > 200){
      for(let i=0;i<50;i++){
        if(hearts[i]) hearts[i].remove();
      }
    }
  }, spawnInterval);

  // í™”ë©´ í¬ì»¤ìŠ¤/ë¹„í¬ì»¤ìŠ¤ì— ë”°ë¼ ì• ë‹ˆë©”ì´ì…˜ ì¡°ì ˆ (ì ˆì „)
  window.addEventListener('blur', () => { running = false; });
  window.addEventListener('focus', () => { running = true; });

  // ëª¨ë°”ì¼ì—ì„œ í„°ì¹˜í•˜ë©´ ë” ìŸì•„ì§€ê²Œ
  let touchTimer = null;
  body.addEventListener('touchstart', () => {
    for(let i=0;i<6;i++) createHeart(true);
    if(touchTimer) clearTimeout(touchTimer);
    touchTimer = setTimeout(()=>{ for(let i=0;i<4;i++) createHeart(); }, 250);
  });

  // ì´ˆê¸° ëª‡ê°œ ìƒì„±ìœ¼ë¡œ ì‹œê° ì±„ì›€
  for(let i=0;i<8;i++) createHeart();
})();
</script>
</body>
</html>
